<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Opdracht CRUD update</title>
        <link rel="stylesheet" href="http://web-backend.local/css/global.css">
        <link rel="stylesheet" href="http://web-backend.local/css/facade.css">
        <link rel="stylesheet" href="http://web-backend.local/css/directory.css">
    </head>
    <body class="web-backend-opdracht">

        <style>
            .voorbeeld-query-01 
            {

            }
            .voorbeeld-query-01 table
            {
                font-size:12px;
                overflow:auto;
            }

            .voorbeeld-query-01 table th,
            .voorbeeld-query-01 table td
            {
                padding:4px;
            }

            .voorbeeld-query-01 table th
            {
                background: #DFDFDF;
                text-align:center;
            }

            .voorbeeld-query-01 table tr
            {
                transition: all 0.2s ease-out;
            }

            .voorbeeld-query-01 table tr:hover
            {
                background-color:lightgreen;
            }

            .voorbeeld-query-01 .odd
            {
                background: #F1F1F1;
            }

            .deletion
            {
                color: #b94a48;
                background-color: #f2dede;
            }

            .input-icon-button
            {
                border: none;
                background-color:transparent;
                cursor:pointer;
                text-indent:-1000px;
                width:16px;
                height:16px;
            }

            .delete
            {
                background: url("http://web-backend.local/img/icon-delete.png") no-repeat;
            }

            .edit
            {
                background: url("http://web-backend.local/img/icon-edit.png") no-repeat;
            }
        </style>
        
        <section class="body">
            
            <h1>Opdracht CRUD update: deel 1</h1>

            <ul>
                <li>Werk verder op CRUD delete</li> 

                <li>
                    Voeg naast de delete-knop een edit-knop toe. Dit heeft net zoals de delete-knop een submit-button met een image.
                    
                    <ul>
                        <li>Het <code>name</code> attribute van deze knop is <code>edit</code> en het <code>value</code> attribuut heeft als waarde de brouwernummer</li>    
                    </ul>
                </li>
                
                <li>
                    Wanneer er op deze knop wordt gedrukt, moet bovenaan de tabel in een<code>&lt;h1&gt;</code> "Brouwerij XXX (# ID) wijzigen" komen. XXX stemt overeen met de brouwernaam en ID stemt overeen met het brouwerid (=PK) gevolgd door de overeenstemmende velden.

                    <ul>
                        <li>Wanneer de brouwer niet gevonden kan worden, moet de boodschap: "Deze brouwerij werd niet gevonden." verschijnen. Dit is nodig wanneer bv. iemand per ongeluk/met kwaad opzet de value van de edit-button verandert.</li>

                        <li>Onder deze kop bevinden zich invulvelden met bijhorende labels.</li>
                        
                        <li>Deze invulvelden moeten ingevuld zijn met de overeenstemmende waarden van die specifieke brouwerij</li>

                        <li>Onder deze invulvelden moet een submit-knop met als <code>value</code> attribuut de waarde <code>wijzigen</code></li>

                        <li>Wanneer er op deze knop gedrukt wordt, moet de brouwer geüpdated worden met de eventuele nieuwe data.</li>

                        <li>"Hoe weet PHP welke brouwer het moet aanpassen als je alle data zou wijzigen?" Werk met een input-type hidden en zet hierin het brouwer-ID. Dit mag op geen enkel moment door de gebruiker aan te passen zijn.</li>
                    </ul>
                </li>

                <li>Het resultaat moet er als volgt uitzien:
                    <div class="facade-minimal voorbeeld-query-01" data-url="http://www.app.local/index.php">
                        
                        <h1>Brouwerij Achouffe ( #1 ) wijzigen</h1>

                        <form>
                            <ul>
                                <li>
                                    <label for="brouwernaam">Brouwernaam</label>
                                    <input type="text" id="brouwernaam" name="brouwernaam" value="Achouffe">
                                </li>
                                <li>
                                    <label for="adres">adres</label>
                                    <input type="text" id="adres" name="adres" value="Route du Village 32">
                                </li>
                                <li>
                                    <label for="postcode">postcode</label>
                                    <input type="text" id="postcode" name="postcode" value="6666">
                                </li>
                                <li>
                                    <label for="gemeente">gemeente</label>
                                    <input type="text" id="gemeente" name="gemeente" value="Achouffe-Wibrin">
                                </li>
                                <li>
                                    <label for="omzet">omzet</label>
                                    <input type="text" id="omzet" name="omzet" value="10000">
                                </li>
                            </ul>
                            <input type="submit" name="submit">
                        </form>
                        <h1>Overzicht van de brouwers</h1>

                        <table>

                            <thead>
                                <tr>
                                    <th>brouwernr</th>
                                    <th>brnaam</th>
                                    <th>adres</th>
                                    <th>postcode</th>
                                    <th>gemeente</th>
                                    <th>omzet</th>
                                    <th colspan="2"></th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr class="odd">
                                    <td>1</td>
                                    <td>Achouffe</td>
                                    <td>Route du Village 32</td>
                                    <td>6666</td>
                                    <td>Achouffe-Wibrin</td>
                                    <td>10000</td>
                                    <td><input type="submit" class="input-icon-button delete"></td>
                                    <td><input type="submit" class="input-icon-button edit"></td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>Alken</td>
                                    <td>Stationstraat 2</td>
                                    <td>3570</td>
                                    <td>Alken</td>
                                    <td>950000</td>
                                    <td><input type="submit" class="input-icon-button delete"></td>
                                    <td><input type="submit" class="input-icon-button edit"></td>
                                </tr>
                                <tr class="odd">
                                    <td>3</td>
                                    <td>Ambly</td>
                                    <td>Rue Principale 45</td>
                                    <td>6953</td>
                                    <td>Ambly-Nassogne</td>
                                    <td>500</td>
                                    <td><input type="submit" class="input-icon-button delete"></td>
                                    <td><input type="submit" class="input-icon-button edit"></td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td>Anker</td>
                                    <td>Guido Gezellelaan 49</td>
                                    <td>2800</td>
                                    <td>Mechelen</td>
                                    <td>3000</td>
                                    <td><input type="submit" class="input-icon-button delete"></td>
                                    <td><input type="submit" class="input-icon-button edit"></td>
                                </tr>
                                <tr class="odd">
                                    <td>6</td>
                                    <td>Artois</td>
                                    <td>Vaartstraat 94</td>
                                    <td>3000</td>
                                    <td>Leuven</td>
                                    <td>4000000</td>
                                    <td><input type="submit" class="input-icon-button delete"></td>
                                    <td><input type="submit" class="input-icon-button edit"></td>
                                </tr>
                            </tbody>
                        </table>

                    </div>
                </li>

                <li>Wanneer de update succesvol is uitgevoerd moet er in een modal-message een boodschap verschijnen: "Aanpassing succesvol doorgevoerd."</li>

                <li>Wanneer de update niet gelukt is, moet er ook een boodschap verschijnen: "Aanpassing is niet gelukt. Probeer opnieuw of neem contact op met de systeembeheerder wanneer deze fout blijft aanhouden." en maak van systeembeheerder een link met een e-mailadres.</li>
            </ul>

            <h1 class="extra">Opdracht CRUD update: deel 2</h1>

            <ul>
                <li>Zorg ervoor dat enkel de invulvelden die aangepast zijn, geüpdated worden. In feite gebeurt dit al automatisch, zoals vermeld in de documentatie van <a href="http://dev.mysql.com/doc/refman/5.7/en/update.html">MySQL</a> (zoeken naar value it currently has), maar het is een interessante denkoefening.</li>

                <li>Zorg ervoor dat wanneer er een kolom wordt toegevoegd aan de database (bv. Telefoonnummer), deze automatisch aan het invulveld wordt toegevoegd zonder dat je dit moet bijprogrammeren in PHP.
                    <ul>
                        <li>Gebruik als labels dan de kolomnamen</li>

                        <li>Begrijp je nu waarom het belangrijk is om goede benamingen te gebruiken voor kolommen? Nog een reden om geen afkortingen als kolomnaam te gebruiken.</li>

                        <li>Bij een goede database zijn de kolomnamen rechtstreeks bruikbaar als labels bij de inputvelden. Spaties worden vervangen door underscores. Zo is het mogelijk om met php deze underscores te vervangen door spaties en wordt de kolomnaam weer bruikbaar als label. Dit is geen must, maar zo is het geheel Dynamisch!</li>

                        <li>Wanneer een kolom verwijderd wordt, mag deze uiteraard ook niet meer verschijnen in het edit-formulier.</li>
                    </ul>
                </li>

            </ul>

            <h1 class="extra">Opdracht CRUD update: deel 3</h1>

            <ul>
                <li>Dit is een superuitbreiding en hoeft enkel gemaakt te worden wanneer je echt, écht teveel tijd over hebt.</li>
                
                <li>Zorg voor versiebeheer. Wanneer iemand iets aanpast, moet de oude data bewaard blijven.</li>
                
                <li>
                     Maak een tabel brouwers_backup. Deze heeft
                     <ul>
                         <li>een primary key</li>
                         <li>brouwernr als foreign key met referentie naar de primary key van de tabel brouwers</li>
                         <li>brnaam (zelfde type/… als tabel brouwers)</li>
                         <li>adres (zelfde type/… als tabel brouwers)</li>
                         <li>postcode (zelfde type/… als tabel brouwers)</li>
                         <li>gemeente (zelfde type/… als tabel brouwers)</li>
                         <li>omzet (zelfde type/.. als tabel brouwers)</li>
                         <li>datum_toegevoegd (type: datetime)</li>
                     </ul>
                </li>
                
                <li>Wanneer er een aanpassing gebeurt moet de oude input weggeschreven worden naar deze backup-tabel. (gebruik <code>NOW()</code> in de SQL-query om een datum toe te voegen</li>

                <li>Wijzig enkele rijen zodat er wat data in deze backup-tabel komt te staan. Controlleer ook altijd of alles correct wordt toegevoegd/aangepast/...</li>

                <li>Voeg nu naast het edit icoon op de php-pagina een versiebeheericoon (icon-history.png) <img src="http://web-backend.local/img/icon-history.png" alt="History icon">toe.</li>

                <li>Wanneer hierop wordt gedrukt, moet bovenaan de pagina een chronologische lijst verschijnen met alle aanpassingen die aan deze brouwerij gebeurd zijn.</li>

                <li>Voorzie naast elke rij een knop "gebruik deze data". Wanneer er op deze knop gedrukt wordt, moet de data van deze rij de huidige data van de brouwerij overschrijven.</li>

                <li>Vergeet niet de te overschrijven data opnieuw in de back-uptabel te plaatsen.</li>

            </ul>
       


        </section>
        
    </body>
</html>
